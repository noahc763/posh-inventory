{% extends 'base.html' %}
{% block content %}
<section class="card">
  <div class="card-header">
    <h2>{{ 'Edit' if item else 'Add' }} Item</h2>
  </div>
  <div class="card-body">
    <form method="post" enctype="multipart/form-data" class="grid-form">
      <label class="field">
        <span>Title</span>
        <input name="title" value="{{ item.title if item else request.args.get('title','') }}" required />
      </label>
      <label class="field">
        <span>Barcode</span>
        <input name="barcode" value="{{ item.barcode if item else request.args.get('barcode','') }}" />
      </label>
      <label class="field">
        <span>Category</span>
        <select name="category_id">
          <option value="">-- none --</option>
          {% for c in categories %}
            <option value="{{ c.id }}" {% if item and item.category_id==c.id %}selected{% endif %}>{{ c.name }}</option>
          {% endfor %}
        </select>
        <small><a class="link" href="/categories" target="_blank">Manage categories</a></small>
      </label>
      <label class="field">
        <span>Brand</span>
        <input name="brand" value="{{ item.brand if item else '' }}" />
      </label>
      <label class="field">
        <span>Size</span>
        <input name="size" value="{{ item.size if item else '' }}" />
      </label>
      <label class="field">
        <span>Color</span>
        <input name="color" value="{{ item.color if item else '' }}" />
      </label>
      <label class="field">
        <span>Condition</span>
        <input name="condition" value="{{ item.condition if item else '' }}" />
      </label>
      <label class="field">
        <span>Purchase Source</span>
        <input name="purchase_source" value="{{ item.purchase_source if item else '' }}" />
      </label>
      <label class="field">
        <span>Purchase Price</span>
        <input name="purchase_price" type="number" step="0.01" value="{{ item.purchase_price if item else '' }}" />
      </label>
      <label class="field">
        <span>Purchase Date</span>
        <input name="purchase_date" type="date" value="{{ item.purchase_date if item else '' }}" />
      </label>
      <label class="field">
        <span>List Price</span>
        <input name="list_price" type="number" step="0.01" value="{{ item.list_price if item else '' }}" />
      </label>
      <label class="field col-span-2">
        <span>Notes</span>
        <textarea name="notes" rows="4">{{ item.notes if item else '' }}</textarea>
      </label>
      <label class="field">
        <span>Photo</span>
        <input type="file" name="photo" accept="image/*" />
      </label>

      {% if item %}
      <fieldset class="field col-span-2">
        <legend>Mark as Sold</legend>
        <div class="grid-form two">
          <label class="field">
            <span>Sold Price</span>
            <input name="sold_price" type="number" step="0.01" value="{{ item.sold_price or '' }}" />
          </label>
          <label class="field">
            <span>Sold Date</span>
            <input name="sold_date" type="date" value="{{ item.sold_date or '' }}" />
          </label>
        </div>
      </fieldset>
      {% endif %}

      <div class="actions col-span-2">
        <button class="btn">Save</button>
      </div>
    </form>
  </div>
</section>
{% endblock %}
